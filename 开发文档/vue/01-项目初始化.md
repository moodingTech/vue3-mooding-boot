# ä¸€ã€é¡¹ç›®åˆå§‹åŒ–

## ï¼ˆä¸€ï¼‰ä½¿ç”¨ Vue CLI åˆ›å»ºé¡¹ç›®

> æ³¨æ„ï¼šä¸è¦ä½¿ç”¨ Git Bash æ‰§è¡Œé¡¹ç›®åˆ›å»ºæ“ä½œï¼Œä½¿ç”¨  cmd æˆ–è€… powershell ä¹‹ç±»çš„å·¥å…·ã€‚

> å¦‚æœä½ è¿˜æ²¡æœ‰å®‰è£… VueCLIï¼Œæˆ–è€…ç‰ˆæœ¬ä½äº 4ï¼Œè¯·æ‰§è¡Œä¸‹é¢çš„å‘½ä»¤å®‰è£…æˆ–æ˜¯å‡çº§ï¼š
>
> ```shell
> npm install --global @vue/cli
> ```

åœ¨å‘½ä»¤è¡Œä¸­è¾“å…¥ä»¥ä¸‹å‘½ä»¤åˆ›å»º Vue é¡¹ç›®ï¼š
```shell
vue create material-vue
```

```shell
Vue CLI v4.5.11
? Please pick a preset: (Use arrow keys)
> Default ([Vue 2] babel, eslint)
  Default (Vue 3 Preview) ([Vue 3] babel, eslint)
  Manually select features   
```
> defaultï¼šé»˜è®¤å‹¾é€‰ babelã€eslintï¼Œå›è½¦ä¹‹åç›´æ¥è¿›å…¥è£…åŒ…
>
> manuallyï¼šè‡ªå®šä¹‰å‹¾é€‰ç‰¹æ€§é…ç½®ï¼Œé€‰æ‹©å®Œæ¯•ä¹‹åï¼Œæ‰ä¼šè¿›å…¥è£…åŒ…
>
> é€‰æ‹©ç¬¬ 2 ç§ï¼šæ‰‹åŠ¨é€‰æ‹©ç‰¹æ€§ï¼Œæ”¯æŒæ›´å¤šè‡ªå®šä¹‰é€‰é¡¹


```shell
Vue CLI v4.5.11
? Please pick a preset: Manually select features
? Check the features needed for your project:
 (*) Choose Vue version
 (*) Babel
 ( ) TypeScript
 ( ) Progressive Web App (PWA) Support
 (*) Router
 (*) Vuex
>(*) CSS Pre-processors
 (*) Linter / Formatter
 ( ) Unit Testing
 ( ) E2E Testing                                                                                                                           
```
åˆ†åˆ«é€‰æ‹©ï¼š

> Choose Vue versionï¼šé€‰æ‹©vueçš„ç‰ˆæœ¬
> Babelï¼šes6 è½¬ es5
> Routerï¼šè·¯ç”±
> Vuex:  å®ç°å¤šç»„ä»¶çŠ¶æ€ç®¡ç†ã€‚å¤šä¸ªç»„ä»¶ä¹‹é—´éœ€è¦æ•°æ®å…±äº«æ—¶
> CSS Pre-processorsï¼šCSS é¢„å¤„ç†å™¨ï¼Œåé¢ä¼šæç¤ºä½ é€‰æ‹© lessã€sassã€stylus ç­‰
> Linter / Formatterï¼šä»£ç æ ¼å¼æ ¡éªŒï¼ŒESLint ä»£ç æ ¼å¼æ ¡éªŒ

```
Vue CLI v4.5.11
? Please pick a preset: Manually select features
? Check the features needed for your project: Choose Vue version, Babel, Router, Vuex, CSS Pre-processors, Linter
? Choose a version of Vue.js that you want to start the project with
  2.x
> 3.x (Preview)      
```

> 2.Xï¼š vue2.0ä»¥ä¸Šç‰ˆæœ¬  3.Xï¼švue3.0ä»¥ä¸Šç‰ˆæœ¬ï¼Œé€‰æ‹©3.X


```shell
Vue CLI v4.5.11
? Please pick a preset: Manually select features
? Check the features needed for your project: Choose Vue version, Babel, Router, Vuex, CSS Pre-processors, Linter
? Choose a version of Vue.js that you want to start the project with 3.x (Preview)
? Use history mode for router? (Requires proper server setup for index fallback in production) (Y/n) n          
```
> æ˜¯å¦ä½¿ç”¨ history è·¯ç”±æ¨¡å¼ï¼Œè¿™é‡Œè¾“å…¥ `n` ä¸ä½¿ç”¨


```shell
Vue CLI v4.5.11
? Please pick a preset: Manually select features
? Check the features needed for your project: Choose Vue version, Babel, Router, Vuex, CSS Pre-processors, Linter
? Choose a version of Vue.js that you want to start the project with 3.x (Preview)
? Use history mode for router? (Requires proper server setup for index fallback in production) No
? Pick a CSS pre-processor (PostCSS, Autoprefixer and CSS Modules are supported by default):
  Sass/SCSS (with dart-sass)
  Sass/SCSS (with node-sass)
> Less
  Stylus 
```
> é€‰æ‹© CSS é¢„å¤„ç†å™¨ï¼Œè¿™é‡Œé€‰æ‹©æˆ‘ä»¬ç†Ÿæ‚‰çš„ Less


```shell
? Pick a linter / formatter config:
  ESLint with error prevention only
  ESLint + Airbnb config
> ESLint + Standard config
  ESLint + Prettier  
```
> é€‰æ‹©æ ¡éªŒå·¥å…·ï¼Œè¿™é‡Œé€‰æ‹© ESLint + [Standard config](https://standardjs.com/)


```shell
? Pick additional lint features:
 (*) Lint on save
>(*) Lint and fix on commit
```
> é€‰æ‹©åœ¨ä»€ä¹ˆæ—¶æœºä¸‹è§¦å‘ä»£ç æ ¼å¼æ ¡éªŒï¼š
> - Lint on saveï¼šæ¯å½“ä¿å­˜æ–‡ä»¶çš„æ—¶å€™
> - Lint and fix on commitï¼šæ¯å½“æ‰§è¡Œ `git commit` æäº¤çš„æ—¶å€™
>
> è¿™é‡Œå»ºè®®ä¸¤ä¸ªéƒ½é€‰ä¸Šï¼Œæ›´ä¸¥è°¨ã€‚


```shell
? Where do you prefer placing config for Babel, ESLint, etc.? (Use arrow keys)
> In dedicated config files
  In package.json
```
> Babelã€ESLint ç­‰å·¥å…·ä¼šæœ‰ä¸€äº›é¢å¤–çš„é…ç½®æ–‡ä»¶ï¼Œè¿™é‡Œçš„æ„æ€æ˜¯é—®ä½ å°†è¿™äº›å·¥å…·ç›¸å…³çš„é…ç½®æ–‡ä»¶å†™åˆ°å“ªé‡Œï¼š
> - In dedicated config filesï¼šåˆ†åˆ«ä¿å­˜åˆ°å•ç‹¬çš„é…ç½®æ–‡ä»¶
> - In package.jsonï¼šä¿å­˜åˆ° package.json æ–‡ä»¶ä¸­
>
> è¿™é‡Œå»ºè®®é€‰æ‹©ç¬¬ 1 ä¸ªï¼Œä¿å­˜åˆ°å•ç‹¬çš„é…ç½®æ–‡ä»¶ï¼Œè¿™æ ·æ–¹ä¾¿æˆ‘ä»¬åšè‡ªå®šä¹‰é…ç½®ã€‚


```shell
? Save this as a preset for future projects? (y/N) N
```
> è¿™é‡Œé‡Œæ˜¯é—®ä½ æ˜¯å¦éœ€è¦å°†åˆšæ‰é€‰æ‹©çš„ä¸€ç³»åˆ—é…ç½®ä¿å­˜èµ·æ¥ï¼Œç„¶åå®ƒå¯ä»¥å¸®ä½ è®°ä½ä¸Šé¢çš„ä¸€ç³»åˆ—é€‰æ‹©ï¼Œä»¥ä¾¿ä¸‹æ¬¡ç›´æ¥é‡ç”¨ã€‚

> è¿™é‡Œæ ¹æ®è‡ªå·±éœ€è¦è¾“å…¥ y æˆ–è€… nï¼Œæˆ‘è¿™é‡Œè¾“å…¥ n ä¸éœ€è¦ã€‚


```shell
Vue CLI v4.5.11
âœ¨  Creating project in D:\project\git\material-management\material-vue.
ğŸ—ƒ  Initializing git repository...
âš™ï¸  Installing CLI plugins. This might take a while...

[     .............] \ idealTree:webpack-log: sill fetch manifest randombytes@^2.1.0   
```
> å‘å¯¼é…ç½®ç»“æŸï¼Œå¼€å§‹è£…åŒ…ã€‚
> å®‰è£…åŒ…çš„æ—¶é—´å¯èƒ½è¾ƒé•¿ï¼Œè¯·è€å¿ƒç­‰å¾…......


```shell
D:\project\git\material-management>vue create material-vue


Vue CLI v4.5.11
? Please pick a preset: Manually select features
? Check the features needed for your project: Choose Vue version, Babel, Router, Vuex, CSS Pre-processors, Linter
? Choose a version of Vue.js that you want to start the project with 3.x (Preview)
? Use history mode for router? (Requires proper server setup for index fallback in production) No
? Pick a CSS pre-processor (PostCSS, Autoprefixer and CSS Modules are supported by default): Less
? Pick a linter / formatter config: Standard
? Pick additional lint features: Lint on save, Lint and fix on commit
? Where do you prefer placing config for Babel, ESLint, etc.? In dedicated config files
? Save this as a preset for future projects? No


Vue CLI v4.5.11
âœ¨  Creating project in D:\project\git\material-management\material-vue.
ğŸ—ƒ  Initializing git repository...
âš™ï¸  Installing CLI plugins. This might take a while...


added 1283 packages in 3m
ğŸš€  Invoking generators...
ğŸ“¦  Installing additional dependencies...


added 238 packages in 17s
âš“  Running completion hooks...

ğŸ“„  Generating README.md...

ğŸ‰  Successfully created project material-vue.
ğŸ‘‰  Get started with the following commands:

 $ cd material-vue
 $ npm run serve
```
å®‰è£…ç»“æŸï¼Œå‘½ä»¤æç¤ºä½ é¡¹ç›®åˆ›å»ºæˆåŠŸï¼ŒæŒ‰ç…§å‘½ä»¤è¡Œçš„æç¤ºåœ¨ç»ˆç«¯ä¸­åˆ†åˆ«è¾“å…¥ï¼š

```shell
# è¿›å…¥ä½ çš„é¡¹ç›®ç›®å½•
cd material-vue

# å¯åŠ¨å¼€å‘æœåŠ¡
npm run serve
```




```shell
 DONE  Compiled successfully in 10708ms                                                   


  App running at:
  - Local:   http://localhost:8080/
  - Network: http://192.168.72.74:8080/

  Note that the development build is not optimized.
  To create a production build, run npm run build.
```
> å¯åŠ¨æˆåŠŸï¼Œå‘½ä»¤è¡Œä¸­è¾“å‡ºé¡¹ç›®çš„ http è®¿é—®åœ°å€ã€‚
> æ‰“å¼€æµè§ˆå™¨ï¼Œè¾“å…¥å…¶ä¸­ä»»ä½•ä¸€ä¸ªåœ°å€è¿›è¡Œè®¿é—®ã€‚



å¦‚æœèƒ½çœ‹åˆ°è¯¥é¡µé¢ï¼Œæ­å–œä½ ï¼Œé¡¹ç›®åˆ›å»ºæˆåŠŸäº†ã€‚

![image-20210313083524556](D:\project\git\material-management\è¯¾ä»¶\assets\image-20210313083524556.png)



## ï¼ˆäºŒï¼‰åŠ å…¥ Git ç‰ˆæœ¬ç®¡ç†

å»ºè®®åœ¨é¡¹ç›®çš„ä¸€å¼€å§‹å°±åŠ å…¥ç‰ˆæœ¬ç®¡ç†ï¼Œé€šè¿‡ç‰ˆæœ¬ç®¡ç†ï¼Œæˆ‘ä»¬å¯ä»¥å¾—åˆ°å¾ˆå¤šå¥½å¤„ï¼Œä¾‹å¦‚ï¼š

- ä»£ç å¤‡ä»½
- å¤šäººåä½œ
- å†å²è®°å½•
- ....

ä¸‹é¢æ˜¯å…·ä½“çš„æ“ä½œæµç¨‹ã€‚

ï¼ˆ1ï¼‰åˆ›å»ºè¿œç¨‹ä»“åº“ï¼ˆGitHubã€Giteeã€codingï¼‰ã€‚ã€‚ã€‚ã€‚

ï¼ˆ2ï¼‰æŠŠæœ¬åœ°ä»“åº“æ¨é€åˆ°è¿œç¨‹ä»“åº“

å¦‚æœæ²¡æœ‰æœ¬åœ°ä»“åº“ï¼š

```shell
# åˆå§‹åŒ–æœ¬åœ°ä»“åº“
git init

# æŠŠæ–‡ä»¶æ·»åŠ åˆ°æš‚å­˜åŒº
git add README.md

# æŠŠæš‚å­˜åŒºæ–‡ä»¶æäº¤åˆ°æœ¬åœ°ä»“åº“å½¢æˆå†å²è®°å½•
git commit -m "first commit"

# æ·»åŠ è¿œç«¯ä»“åº“åœ°å€åˆ°æœ¬åœ°ä»“åº“
git remote add origin https://github.com/lipengzhou/toutiao-publish-admin.git

# æ¨é€åˆ°è¿œç¨‹ä»“åº“
git push -u origin master
```



å¦‚æœå·²æœ‰æœ¬åœ°ä»“åº“

> VueCLI åœ¨åˆ›å»ºé¡¹ç›®çš„æ—¶å€™è‡ªåŠ¨å¸®ä½ åˆå§‹åŒ–äº† `Git` ä»“åº“ï¼Œå¹¶ä¸”åŸºäºåˆå§‹ä»£ç é»˜è®¤æ‰§è¡Œäº†ä¸€æ¬¡æäº¤ã€‚

```shell
git remote add origin https://github.com/lipengzhou/toutiao-publish-admin.git

# -u å°±æ˜¯è®°ä½æœ¬æ¬¡æ¨é€çš„ä¿¡æ¯ï¼Œä¸‹æ¬¡å°±ä¸ç”¨å†™æ¨é€ä¿¡æ¯äº†ï¼Œå¯ä»¥ç›´æ¥ git push
git push -u origin master
```

ï¼ˆ3ï¼‰ä¹‹åå¦‚æœæœ‰ä»£ç å˜åŠ¨éœ€è¦æäº¤

```shell
git add
git commit

# æ¨é€åˆ°è¿œç¨‹ä»“åº“
# æ¨é€çš„æ—¶å€™å¦‚æœä¸æ”¹å˜è¿œç¨‹ä»“åº“å’Œåˆ†æ”¯çš„è¯å°±ç›´æ¥
git push

# å¦‚æœæ¨é€çš„è¿œç¨‹ä»“åº“æˆ–æ˜¯åˆ†æ”¯æ”¹å˜äº†
$ git push -u è¿œç¨‹ä»“åº“ åˆ†æ”¯åç§°
```



> æ‰©å±•ï¼šç®¡ç†è¿œç¨‹ä»“åº“åœ°å€ä¿¡æ¯
>
> ```shell
> # æŸ¥çœ‹ä½¿ç”¨å¸®åŠ©
> git remote --help
> 
> # æŸ¥çœ‹æ‰€æœ‰çš„è¿œç¨‹ä»“åº“ä¿¡æ¯
> git remote -v
> 
> # æ·»åŠ è¿œç¨‹ä»“åº“åœ°å€ä¿¡æ¯
> git remote add åç§° è¿œç¨‹ä»“åº“åœ°å€
> 
> # åˆ é™¤æŒ‡å®šçš„è¿œç¨‹ä»“åº“ä¿¡æ¯
> git remote remove åç§°
> 
> # ä¿®æ”¹è¿œç¨‹ä»“åº“åœ°å€ä¿¡æ¯
> git remote set-url è¿œç¨‹ä»“åº“åœ°å€åç§° æ–°åœ°å€
> ```

## ï¼ˆä¸‰ï¼‰è°ƒæ•´åˆå§‹ç›®å½•ç»“æ„

è¿™é‡Œä¸»è¦å°±æ˜¯ä¸‹é¢çš„ä¸¤ä¸ªå·¥ä½œï¼š

- åˆ é™¤åˆå§‹åŒ–çš„é»˜è®¤æ–‡ä»¶
- æ–°å¢è°ƒæ•´æˆ‘ä»¬éœ€è¦çš„ç›®å½•ç»“æ„

1ã€å°† `App.vue` ä¿®æ”¹ä¸ºï¼š

```html
<template>
  <div id="app">
    <!-- è·¯ç”±å‡ºå£ -->
    <router-view></router-view>
  </div>
</template>

<script>
export default {
  name: 'App'
}
</script>
<style lang="less"></style>

```

2ã€å°† `router/index.js` ä¿®æ”¹ä¸ºï¼š

```javascript
import { createRouter, createWebHashHistory } from 'vue-router'

const routes = []

const router = createRouter({
  history: createWebHashHistory(),
  routes
})

export default router

```

3ã€åˆ é™¤é»˜è®¤ç”Ÿæˆçš„ä¸ç›¸å…³æ–‡ä»¶ï¼š

- src/views/About.vue
- src/views/Home.vue
- src/components/HelloWorld.vue
- src/assets/logo.png



4ã€å¢åŠ ä»¥ä¸‹å‡ ä¸ªç›®å½•

- src/api ç›®å½•
  - å­˜å‚¨æ¥å£æ¨¡å—
- src/utils ç›®å½•
  - å­˜å‚¨ä¸€äº›å·¥å…·æ¨¡å—
- src/assets/styles ç›®å½•
  - index.less æ–‡ä»¶ï¼Œè®¾ç½®å…¨å±€æ ·å¼
  - åœ¨ `main.js` ä¸­åŠ è½½å…¨å±€æ ·å¼ `import './assets/styles/index.less'`

5ã€å°† `main.js` ä¿®æ”¹ä¸ºï¼š

```
/**
 * é¡¹ç›®çš„å¯åŠ¨å…¥å£
 */
import { createApp } from 'vue'
import App from './App.vue'
// è·¯ç”±è®¾ç½®
import router from './router'
// æ³¨å†ŒçŠ¶æ€ç®¡ç†
import store from './store'
// å¼•å…¥å…¨å±€æ ·å¼è®¾ç½®
import './assets/styles/index.less'

// åˆ›å»º Vue æ ¹å®ä¾‹
// æŠŠ router é…ç½®åˆ°æ ¹å®ä¾‹ä¸­
// æŠŠ vuex é…ç½®åˆ°æ ¹å®ä¾‹ä¸­
const app = createApp(App)
app.use(store)
app.use(router)
app.mount('#app')
// createApp(App).use(store).use(router).mount('#app')
```

è°ƒæ•´ä¹‹åçš„ç›®å½•ç»“æ„å¦‚ä¸‹ã€‚

```
.                                 
â”œâ”€â”€ README.md                     
â”œâ”€â”€ babel.config.js               
â”œâ”€â”€ package-lock.json             
â”œâ”€â”€ package.json                  
â”œâ”€â”€ public                        
â”‚   â”œâ”€â”€ favicon.ico               
â”‚   â””â”€â”€ index.html                
â””â”€â”€ src                           
    â”œâ”€â”€ api
    â”œâ”€â”€ App.vue                   
    â”œâ”€â”€ assets  
    	â”œâ”€â”€ styles  
    â”œâ”€â”€ components                
    â”œâ”€â”€ main.js                   
    â”œâ”€â”€ router
    â”œâ”€â”€ store 
    â”œâ”€â”€ utils                 
    â””â”€â”€ views
```

## ï¼ˆå››ï¼‰JavaScript ä»£ç è§„èŒƒ

#### ä»€ä¹ˆæ˜¯ç¼–ç è§„èŒƒ

#### å¦‚ä½•ç»Ÿä¸€ç¼–ç è§„èŒƒ

ESLintã€‚

#### æµè¡Œçš„ç¼–ç è§„èŒƒ

- Airbnb JavaScript Style
  - éå¸¸ä¸¥è°¨ï¼Œè§„åˆ™ç‰¹åˆ«å¤š

- JavaScript Standard Style
  - ç›¸æ¯” Airbnb JavaScript Style è¦å®½æ¾ä¸€äº›ã€‚

æˆ‘ä»¬é¡¹ç›®ä¸­ä½¿ç”¨çš„æ˜¯ [JavaScript Standard Style](https://standardjs.com/readme-zhcn.html) ä»£ç é£æ ¼ã€‚ä¸‹é¢æ˜¯å®ƒçš„ä¸€äº›å…·ä½“è§„åˆ™è¦æ±‚ï¼š

#### JavaScript Standard Style è§„èŒƒè¯´æ˜

å»ºè®®æŠŠï¼šhttps://standardjs.com/rules-zhcn.html çœ‹ä¸€éï¼Œç„¶ååœ¨å†™çš„æ—¶å€™é‡åˆ°é”™è¯¯å°±æŸ¥è¯¢è§£å†³ã€‚

- **ä½¿ç”¨ä¸¤ä¸ªç©ºæ ¼** â€“ è¿›è¡Œç¼©è¿›

- **å­—ç¬¦ä¸²ä½¿ç”¨å•å¼•å·** â€“ éœ€è¦è½¬ä¹‰çš„åœ°æ–¹é™¤å¤–

- **ä¸å†æœ‰å†—ä½™çš„å˜é‡** â€“ è¿™æ˜¯å¯¼è‡´ _å¤§é‡_ bug çš„æºå¤´!

- **æ— åˆ†å·** â€“ [è¿™](http://blog.izs.me/post/2353458699/an-open-letter-to-javascript-leaders-regarding)[æ²¡ä»€ä¹ˆä¸å¥½ã€‚](http://inimino.org/~inimino/blog/javascript_semicolons)[ä¸éª—ä½ ï¼](https://www.youtube.com/watch?v=gsfbh17Ax9I)

- è¡Œé¦–ä¸è¦ä»¥ `(`, `[`, or ``` å¼€å¤´

  - è¿™æ˜¯çœç•¥åˆ†å·æ—¶**å”¯ä¸€**ä¼šé€ æˆé—®é¢˜çš„åœ°æ–¹ â€“ _å·¥å…·é‡Œå·²åŠ äº†è‡ªåŠ¨æ£€æµ‹ï¼_
  - [è¯¦æƒ…](https://standardjs.com/rules-zhcn.html#semicolons)

- **å…³é”®å­—ååŠ ç©ºæ ¼** `if (condition) { ... }`

- **å‡½æ•°åååŠ ç©ºæ ¼** `function name (arg) { ... }`

- åšæŒä½¿ç”¨å…¨ç­‰ `===` æ‘’å¼ƒ `==` ä¸€ä½†åœ¨éœ€è¦æ£€æŸ¥ `null || undefined` æ—¶å¯ä»¥ä½¿ç”¨ `obj == null`ã€‚

- ä¸€å®šè¦å¤„ç† Node.js ä¸­é”™è¯¯å›è°ƒä¼ é€’è¿›æ¥çš„ `err` å‚æ•°ã€‚

- ä½¿ç”¨æµè§ˆå™¨å…¨å±€å˜é‡æ—¶åŠ ä¸Š `window` å‰ç¼€

  - document å’Œ navigator é™¤å¤–

  - é¿å…æ— æ„ä¸­ä½¿ç”¨åˆ°äº†è¿™äº›å‘½åçœ‹ä¸Šå»å¾ˆæ™®é€šçš„å…¨å±€å˜é‡ï¼Œ `open`, `length`, `event` è¿˜æœ‰ `name`ã€‚

- **æŸ¥çœ‹æ›´å¤š** â€“ _ä¸ºä½•ä¸è¯•è¯• standard è§„èŒƒå‘¢ï¼_

è¯´äº†é‚£ä¹ˆå¤šï¼Œçœ‹çœ‹[è¿™ä¸ªéµå¾ªäº† Standard è§„èŒƒçš„ç¤ºä¾‹æ–‡ä»¶](https://github.com/expressjs/body-parser/blob/master/index.js) ä¸­çš„ä»£ç å§ã€‚æˆ–è€…ï¼Œè¿™é‡Œè¿˜æœ‰[ä¸€å¤§æ³¢ä½¿ç”¨äº†æ­¤è§„èŒƒçš„é¡¹ç›®](https://raw.githubusercontent.com/standard/standard-packages/master/all.json) ä»£ç å¯ä¾›å‚è€ƒã€‚

#### å¦‚ä½•è§£å†³ä»£ç è§„èŒƒé”™è¯¯

<img src="assets/image-20200420112418029.png" alt="image-20200420112418029" style="zoom:50%;" />

å¦‚æœä½ ä¸è®¤è¯†å‘½ä»¤è¡Œä¸­çš„è¯­æ³•æŠ¥é”™æ˜¯ä»€ä¹ˆæ„æ€ï¼Œä½ å¯ä»¥æ ¹æ®é”™è¯¯ä»£å·å» ESLint è§„åˆ™åˆ—è¡¨ä¸­æŸ¥æ‰¾å…¶å…·ä½“å«ä¹‰ã€‚

ä»€ä¹ˆæ˜¯é”™è¯¯ä»£å·ï¼Ÿ

<img src="./assets/1561024746437.png" alt="1561024746437" style="zoom:50%;" />

> æ‹¬å·ä¸­çš„å°±æ˜¯é”™è¯¯ä»£ç ã€‚
>
> semi
>
> keyword-spacing
>
> space-before-function-paren

æ‰“å¼€ [ESLint è§„åˆ™è¡¨](https://cn.eslint.org/docs/rules/)ï¼Œä½¿ç”¨é¡µé¢æœç´¢ï¼ˆCtrl + Fï¼‰è¿™ä¸ªä»£ç ï¼ŒæŸ¥æ‰¾å¯¹è¯¥è§„åˆ™çš„ä¸€ä¸ªé‡Šä¹‰ã€‚

<img src="./assets/1561024887156.png" alt="1561024887156" style="zoom:50%;" />

> ä¾‹å¦‚æˆ‘é€šè¿‡é¡µé¢é¡µé¢æŸ¥æ‰¾ `space-before-function-paren` è§„åˆ™ä»£å·çš„é‡Šä¹‰ã€‚

#### å…³äº Vue.js ä»£ç è§„èŒƒ

> éå¼ºåˆ¶è¦æ±‚ï¼Œä½†æ˜¯å»ºè®®æŒ‰ç…§ä¸€å®šæ ¼å¼æ¥å†™ã€‚

å‚è€ƒï¼š[å®˜æ–¹é£æ ¼æŒ‡å—](https://cn.vuejs.org/v2/style-guide/)ã€‚

## ï¼ˆäº”ï¼‰Element-plus ç»„ä»¶åº“

#### Element-plus ä»‹ç»

Element-plus æ˜¯é¥¿äº†ä¹ˆå‰ç«¯å›¢é˜Ÿå¼€å‘çš„ä¸€ä¸ªåŸºäº Vue.js çš„æ¡Œé¢ç«¯ç»„ä»¶åº“ï¼Œå®ƒæä¾›çš„ç»„ä»¶éå¸¸ä¸°å¯Œï¼Œä¸ä»…åŠŸèƒ½å¼ºå¤§ï¼Œè€Œä¸”ç®€å•æ˜“ç”¨ã€‚

Element-plus éå¸¸çš„æµè¡Œï¼Œå¤§å¤šæ•°åŸºäº Vue.js å¼€å‘çš„ç®¡ç†ç³»ç»Ÿéƒ½ä¼šä½¿ç”¨åˆ°å®ƒã€‚

- å®˜ç½‘ï¼šhttps://element-plus.gitee.io/
- GitHub ä»“åº“ï¼šhttps://github.com/ElemeFE/element
  - ç›®å‰å·²æœ‰ 44.8k çš„ Star äº†

#### å¯¼å…¥åˆ°é¡¹ç›®ä¸­

1ã€å®‰è£…

```bash
npm install element-plus --save
```

2ã€åœ¨ `main.js` ä¸­é…ç½® element -plusç»„ä»¶åº“

```js
/**
 * é¡¹ç›®çš„å¯åŠ¨å…¥å£
 */
import { createApp } from 'vue'
import App from './App.vue'
// è·¯ç”±è®¾ç½®
import router from './router'
// æ³¨å†ŒçŠ¶æ€ç®¡ç†
import store from './store'
// å¼•å…¥å…¨å±€æ ·å¼è®¾ç½®
import './assets/styles/index.less'

// æ•´ä¸ª Element Plus ç»„ä»¶åº“
import ElementPlus from 'element-plus'
// åŠ è½½ element ç»„ä»¶åº“çš„æ ·å¼
import 'element-plus/lib/theme-chalk/index.css'

// åˆ›å»º Vue æ ¹å®ä¾‹
// æŠŠ router é…ç½®åˆ°æ ¹å®ä¾‹ä¸­
// æŠŠ vuex é…ç½®åˆ°æ ¹å®ä¾‹ä¸­
// æŠŠ ElementPlus é…ç½®åˆ°æ ¹å®ä¾‹ä¸­
const app = createApp(App)
app.use(store)
app.use(router)
app.use(ElementPlus)
app.mount('#app')
// createApp(App).use(store).use(router).mount('#app')
```

#### ä½¿ç”¨è¯´æ˜

ç”¨å“ªä¸ªç»„ä»¶å°±çœ‹å“ªä¸ªç»„ä»¶çš„è¯´æ˜æ–‡æ¡£ã€‚

å¤åˆ¶ -> ç²˜è´´ -> try-try-seeã€‚



## ï¼ˆå…­ï¼‰Axioså°è£…è¯·æ±‚

1ã€ç®€ä»‹

Axios æ˜¯ä¸€ä¸ªåŸºäº promise çš„ HTTP åº“ï¼Œå¯ä»¥ç”¨åœ¨æµè§ˆå™¨å’Œ node.js ä¸­ã€‚ç®€å•æ¥è¯´å°±æ˜¯å‰ç«¯æœ€ç«æœ€ç®€å•çš„ä¸€ä¸ªhttpè¯·æ±‚è§£å†³æ–¹æ¡ˆã€‚

2ã€å®‰è£…

```
npm install axios
```

3ã€åŠŸèƒ½

- ä»æµè§ˆå™¨ä¸­åˆ›å»º XMLHttpRequests
- ä» node.js åˆ›å»º http è¯·æ±‚
- æ”¯æŒ Promise API
- æ‹¦æˆªè¯·æ±‚å’Œå“åº”
- è½¬æ¢è¯·æ±‚æ•°æ®å’Œå“åº”æ•°æ®
- å–æ¶ˆè¯·æ±‚
- è‡ªåŠ¨è½¬æ¢ JSON æ•°æ®
- å®¢æˆ·ç«¯æ”¯æŒé˜²å¾¡ XSRF

4ã€ä»£ç å°è£…

ï¼ˆ1ï¼‰å·¥å…·ç±»å°è£…

ä¸ºäº†æ–¹ä¾¿ï¼Œæˆ‘ä»¬åœ¨è¿™é‡ŒæŠŠ axios å•ç‹¬å°è£…ä¸€ä¸ªæ¨¡å—ç”¨äºé¡¹ç›®ä¸­çš„è¯·æ±‚æ“ä½œã€‚

```js
/**
 * åŸºäº axios å°è£…çš„è¯·æ±‚æ¨¡å—
 */
// å¼•å…¥axios
import axios from 'axios';

// åˆ›å»ºaxioså®ä¾‹
const httpService = axios.create({
    // urlå‰ç¼€-'https://some-domain.com/api/'
    baseURL: process.env.BASE_API, // éœ€è‡ªå®šä¹‰
    // è¯·æ±‚è¶…æ—¶æ—¶é—´
    timeout: 3000 // éœ€è‡ªå®šä¹‰
});

// requestæ‹¦æˆªå™¨
httpService.interceptors.request.use(
    config => {
        // æ ¹æ®æ¡ä»¶åŠ å…¥token-å®‰å…¨æºå¸¦
        if (true) { // éœ€è‡ªå®šä¹‰
            // è®©æ¯ä¸ªè¯·æ±‚æºå¸¦token
            config.headers['User-Token'] = '';
        }
        return config;
    }, 
    error => {
        // è¯·æ±‚é”™è¯¯å¤„ç†
        Promise.reject(error);
    }
)

// responeæ‹¦æˆªå™¨
httpService.interceptors.response.use(
    response => {
        // ç»Ÿä¸€å¤„ç†çŠ¶æ€
        const res = response.data;
        if (res.statuscode != 1) { // éœ€è‡ªå®šä¹‰
            // è¿”å›å¼‚å¸¸
            return Promise.reject({
                status: res.statuscode,
                message: res.message
            });
        } else {
            return response.data;
        }
    },
    // å¤„ç†å¤„ç†
    error => {
         if (error && error.response) {
            switch (error.response.status) {
                case 400:
                    error.message = 'é”™è¯¯è¯·æ±‚';
                    break;
                case 401:
                    error.message = 'æœªæˆæƒï¼Œè¯·é‡æ–°ç™»å½•';
                    break;
                case 403:
                    error.message = 'æ‹’ç»è®¿é—®';
                    break;
                case 404:
                    error.message = 'è¯·æ±‚é”™è¯¯,æœªæ‰¾åˆ°è¯¥èµ„æº';
                    break;
                case 405:
                    error.message = 'è¯·æ±‚æ–¹æ³•æœªå…è®¸';
                    break;
                case 408:
                    error.message = 'è¯·æ±‚è¶…æ—¶';
                    break;
                case 500:
                    error.message = 'æœåŠ¡å™¨ç«¯å‡ºé”™';
                    break;
                case 501:
                    error.message = 'ç½‘ç»œæœªå®ç°';
                    break;
                case 502:
                    error.message = 'ç½‘ç»œé”™è¯¯';
                    break;
                case 503:
                    error.message = 'æœåŠ¡ä¸å¯ç”¨';
                    break;
                case 504:
                    error.message = 'ç½‘ç»œè¶…æ—¶';
                    break;
                case 505:
                    error.message = 'httpç‰ˆæœ¬ä¸æ”¯æŒè¯¥è¯·æ±‚';
                    break;
                default:
                    error.message = `æœªçŸ¥é”™è¯¯${error.response.status}`;
            }
        } else {
            error.message = "è¿æ¥åˆ°æœåŠ¡å™¨å¤±è´¥";
        }
        return Promise.reject(error);
    }
)

/*ç½‘ç»œè¯·æ±‚éƒ¨åˆ†*/

/*
 *  getè¯·æ±‚
 *  url:è¯·æ±‚åœ°å€
 *  params:å‚æ•°
 * */
export function get(url, params = {}) {
    return new Promise((resolve, reject) => {
        httpService({
            url: url,
            method: 'get',
            params: params
        }).then(response => {
            resolve(response);
        }).catch(error => {
            reject(error);
        });
    });
}

/*
 *  postè¯·æ±‚
 *  url:è¯·æ±‚åœ°å€
 *  params:å‚æ•°
 * */
export function post(url, params = {}) {
    return new Promise((resolve, reject) => {
        httpService({
            url: url,
            method: 'post',
            data: params
        }).then(response => {
            resolve(response);
        }).catch(error => {
            reject(error);
        });
    });
}

/*
 *  æ–‡ä»¶ä¸Šä¼ 
 *  url:è¯·æ±‚åœ°å€
 *  params:å‚æ•°
 * */
export function fileUpload(url, params = {}) {
    return new Promise((resolve, reject) => {
        httpService({
            url: url,
            method: 'post',
            data: params,
            headers: { 'Content-Type': 'multipart/form-data' }
        }).then(response => {
            resolve(response);
        }).catch(error => {
            reject(error);
        });
    });
}

export default {
    get,
    post,
    fileUpload
}
```

ï¼ˆ2ï¼‰ä½¿ç”¨

```
// å¼•å…¥å·¥å…·ç±»-ç›®å½•è‡ªå®šä¹‰
import fetch from '@/util/fetch'

// ä½¿ç”¨
const TMPURL = ''; // urlåœ°å€
const params = {}; // å‚æ•°
fetch.post(TMPURL + '/login/login', params);
```

## ï¼ˆä¸ƒï¼‰é˜¿é‡Œiconfontæ ‡ç­¾

## ï¼ˆå…«ï¼‰é¡¹ç›®å¼•å…¥çš„æ’ä»¶

#### 1ã€æ»‘åŠ¨éªŒè¯æ¨¡å—

å®‰è£…

```
npm i vue-drag-verify2
```

ä½¿ç”¨æ•™ç¨‹

```
https://github.com/yimijianfang/vue-drag-verify.git
```

#### 2ã€js-cookie

è¯´æ˜

> js-cookieæ˜¯ä¸€ä¸ªç®€å•çš„ï¼Œè½»é‡çº§çš„[å¤„ç†cookiesçš„js API](https://www.npmjs.com/package/js-cookie)ã€‚

å®‰è£…

```
npm install js-cookie
```

å¼•ç”¨

```
import Cookies from 'js-cookie'
```

ç®€å•ä½¿ç”¨

```
// 1ã€åˆ›å»º
//åˆ›å»ºç®€å•çš„cookie
Cookies.set('name', 'value');
//åˆ›å»ºæœ‰æ•ˆæœŸä¸º7å¤©çš„cookie
Cookies.set('name', 'value', { expires: 7 });
//ä¸ºå½“å‰é¡µåˆ›å»ºæœ‰æ•ˆæœŸ7å¤©çš„cookie
Cookies.set('name', 'value', { expires: 7, path: '' });
/*
expires
å®šä¹‰æœ‰æ•ˆæœŸã€‚å¦‚æœä¼ å…¥Numberï¼Œé‚£ä¹ˆå•ä½ä¸ºå¤©ï¼Œä½ ä¹Ÿå¯ä»¥ä¼ å…¥ä¸€ä¸ªDateå¯¹è±¡ï¼Œè¡¨ç¤ºæœ‰æ•ˆæœŸè‡³DateæŒ‡å®šæ—¶é—´ã€‚é»˜è®¤æƒ…å†µä¸‹cookieæœ‰æ•ˆæœŸæˆªæ­¢è‡³ç”¨æˆ·é€€å‡ºæµè§ˆå™¨ã€‚
path
stringï¼Œè¡¨ç¤ºæ­¤cookieå¯¹å“ªä¸ªåœ°å€å¯è§ã€‚é»˜è®¤ä¸ºâ€/â€ã€‚
domain
stringï¼Œè¡¨ç¤ºæ­¤cookieå¯¹å“ªä¸ªåŸŸåå¯è§ã€‚è®¾ç½®åcookieä¼šå¯¹æ‰€æœ‰å­åŸŸåå¯è§ã€‚é»˜è®¤ä¸ºå¯¹åˆ›å»ºæ­¤cookieçš„åŸŸåå’Œå­åŸŸåå¯è§ã€‚
secure
trueæˆ–falseï¼Œè¡¨ç¤ºcookieä¼ è¾“æ˜¯å¦ä»…æ”¯æŒhttpsã€‚é»˜è®¤ä¸ºä¸è¦æ±‚åè®®å¿…é¡»ä¸ºhttpsã€‚

*/

// 2ã€å–å€¼
Cookies.get('name'); // => 'value'
Cookies.get('nothing'); // => undefined
//è·å–æ‰€æœ‰cookie
Cookies.get(); // => { name: 'value' }

// 3ã€åˆ é™¤å€¼
Cookies.remove('name');
//å¦‚æœå€¼è®¾ç½®äº†è·¯å¾„ï¼Œé‚£ä¹ˆä¸èƒ½ç”¨ç®€å•çš„deleteæ–¹æ³•åˆ é™¤å€¼ï¼Œéœ€è¦åœ¨deleteæ—¶æŒ‡å®šè·¯å¾„
Cookies.set('name', 'value', { path: '' });
Cookies.remove('name'); // åˆ é™¤å¤±è´¥
Cookies.remove('name', { path: '' }); // åˆ é™¤æˆåŠŸ
//æ³¨æ„ï¼Œåˆ é™¤ä¸å­˜åœ¨çš„cookieä¸ä¼šæŠ¥é”™ä¹Ÿä¸ä¼šæœ‰è¿”å›

// 4ã€jsonç›¸å…³
Cookies.set('name', { foo: 'bar' });
Cookies.get('nam
Cookies.getJSON('name'); // => { foo: 'bar' }e'); // => '{"foo":"bar"}'
Cookies.get(); // => { name: '{"foo":"bar"}' }

// ç”¨getJSONæ–¹æ³•è·å–cookieï¼Œé‚£ä¹ˆjs-cookieä¼šç”¨JSON.parseè§£æstringå¹¶è¿”å›
Cookies.getJSON('name'); // => { foo: 'bar' }
Cookies.getJSON(); // => { name: { foo: 'bar' } }
```

3ã€nprogress

è¯´æ˜

> è¿™æ˜¯ä¸€ä¸ªç±»ä¼¼youtubeã€Mediumç­‰ç½‘ç«™ä¸Šçš„å°è¿›åº¦æ¡æ’ä»¶ã€‚çº³ç±³çº§çš„è¿›åº¦æ¡ï¼Œæ¶“æ¶“ç»†æµåŠ¨ç”»å‘Šè¯‰ä½ çš„ç”¨æˆ·ï¼Œä¸€äº›äº‹æƒ…æ­£åœ¨å‘ç”Ÿï¼

å®‰è£…

```
npm install --save nprogress
```

ä½¿ç”¨

> ç›´æ¥è°ƒç”¨ `start()`æˆ–è€…`done()`æ¥æ§åˆ¶è¿›åº¦æ¡ã€‚

```
NProgress.start();
NProgress.done();

// å¯ä»¥é€šè¿‡è°ƒç”¨ .set(n)æ¥è®¾ç½®è¿›åº¦ï¼Œnæ˜¯0-1çš„æ•°å­—ã€‚
NProgress.set(0.0);     // Sorta same as .start()
NProgress.set(0.4);
NProgress.set(1.0);     // Sorta same as .done()
```



## ï¼ˆä¹ï¼‰vuex

#### 1ã€vuexæ˜¯ä»€ä¹ˆï¼Ÿ

â€‹		vuexæ˜¯ä¸€ä¸ªä¸“ä¸º Vue.js åº”ç”¨ç¨‹åºå¼€å‘çš„çŠ¶æ€ç®¡ç†æ¨¡å¼ã€‚å®ƒé‡‡ç”¨é›†ä¸­å¼å­˜å‚¨ç®¡ç†åº”ç”¨çš„æ‰€æœ‰ç»„ä»¶çš„çŠ¶æ€ï¼Œå¹¶ä»¥ç›¸åº”çš„è§„åˆ™ä¿è¯çŠ¶æ€ä»¥ä¸€ç§å¯é¢„æµ‹çš„æ–¹å¼å‘ç”Ÿå˜åŒ–ã€‚chromeå®‰è£…è°ƒè¯•å·¥å…· devtools extension

#### 2ã€å•å‘æ•°æ®æµ

![img](D:\project\git\material-management\è¯¾ä»¶\assets\1531106987.png)

**ç¤ºæ„å›¾è¯´æ˜ï¼š**

- Stateï¼šé©±åŠ¨åº”ç”¨çš„æ•°æ®æºï¼ˆå•å‘æ•°æ®æµï¼‰
- Viewï¼šä»¥å£°æ˜æ–¹å¼å°† state æ˜ å°„åˆ°è§†å›¾ï¼ˆé™æ€æ˜¾ç¤ºå‡ºæ¥çš„æ•°æ®æºï¼‰
- Actionsï¼šå¤„ç†ç”¨æˆ·åœ¨viewä¸Šé¢æ“ä½œè€Œå¯¼è‡´çš„çŠ¶æ€å˜åŒ–ï¼ˆæ•°æ®æºå˜åŒ–è¿½è¸ªï¼‰

ä¸€ä¸ªç®€å•çš„demoæ¡ˆä¾‹ï¼š

```
<template>
    <div>
        <!-- view -->
        <div>{{ count }}</div>
        <button @click="increment">increment</button>
    </div>
</template>
<script>
export default {
    // state
    data () {
        return {
            count: 0
        }
    },
    // actions
    methods: {
        increment () {
            this.count++
        }
    }
}
</script>
<style>

</style>
```

#### 3ã€vuexè§£å†³çš„é—®é¢˜

- å¤šä¸ªè§†å›¾ç»„ä»¶ï¼ŒåŒ…æ‹¬çˆ¶å­ç»„ä»¶ï¼Œå…„å¼Ÿç»„ä»¶ä¹‹é—´çš„çŠ¶æ€å…±äº«
- ä¸åŒè§†å›¾ç»„ä»¶çš„è¡Œä¸ºéœ€è¦å˜æ›´åŒä¸€ä¸ªçŠ¶æ€

#### 4ã€vuexä½¿ç”¨åœºæ™¯

ä¸­å¤§å‹å•é¡µåº”ç”¨ï¼Œéœ€è¦è€ƒè™‘å¦‚ä½•æ›´å¥½åœ°åœ¨ç»„ä»¶å¤–éƒ¨ç®¡ç†çŠ¶æ€ï¼Œç®€å•åº”ç”¨ä¸å»ºè®®ä½¿ç”¨

#### 5ã€vuexä¸å…¨å±€å˜é‡çš„åŒºåˆ«

- å“åº”å¼ï¼švuexçš„çŠ¶æ€å­˜å‚¨æ˜¯å“åº”å¼çš„ï¼Œå½“Vueç»„ä»¶ä»storeä¸­è¯»å–çŠ¶æ€çš„æ—¶å€™ï¼Œè‹¥storeä¸­çš„çŠ¶æ€å‘ç”Ÿå˜åŒ–ï¼Œé‚£ä¹ˆç›¸åº”çš„ç»„ä»¶ä¹Ÿä¼šå¾—åˆ°é«˜æ•ˆæ›´æ–°
- ä¸èƒ½ç›´æ¥æ”¹å˜storeï¼šä¸èƒ½ç›´æ¥æ”¹å˜storeçš„å˜åŒ–ï¼Œæ”¹å˜storeä¸­çŠ¶æ€çš„å”¯ä¸€é€”å¾„æ˜¯commit mutationï¼Œæ–¹ä¾¿äºè·Ÿè¸ªæ¯ä¸€ä¸ªçŠ¶æ€çš„å˜åŒ–

#### 6ã€vuexæ ¸å¿ƒæµç¨‹

![img](D:\project\git\material-management\è¯¾ä»¶\assets\1531106988.png)
**ç¤ºæ„å›¾è¯´æ˜ï¼š**

1. Vue Componentsï¼šVueç»„ä»¶ã€‚HTMLé¡µé¢ä¸Šï¼Œè´Ÿè´£æ¥æ”¶ç”¨æˆ·æ“ä½œç­‰äº¤äº’è¡Œä¸ºï¼Œæ‰§è¡Œdispatchæ–¹æ³•è§¦å‘å¯¹åº”actionè¿›è¡Œå›åº”
2. Dispatchï¼šæ“ä½œè¡Œä¸ºè§¦å‘æ–¹æ³•ï¼Œæ˜¯å”¯ä¸€èƒ½æ‰§è¡Œactionçš„æ–¹æ³•
3. Actionsï¼šæ“ä½œè¡Œä¸ºå¤„ç†æ¨¡å—ã€‚è´Ÿè´£å¤„ç†Vue Componentsæ¥æ”¶åˆ°çš„æ‰€æœ‰äº¤äº’è¡Œä¸ºã€‚åŒ…å«åŒæ­¥/å¼‚æ­¥æ“ä½œï¼Œæ”¯æŒå¤šä¸ªåŒåæ–¹æ³•ï¼ŒæŒ‰ç…§æ³¨å†Œçš„é¡ºåºä¾æ¬¡è§¦å‘ã€‚å‘åå°APIè¯·æ±‚çš„æ“ä½œå°±åœ¨è¿™ä¸ªæ¨¡å—ä¸­è¿›è¡Œï¼ŒåŒ…æ‹¬è§¦å‘å…¶ä»–actionä»¥åŠæäº¤mutationçš„æ“ä½œã€‚è¯¥æ¨¡å—æä¾›äº†Promiseçš„å°è£…ï¼Œä»¥æ”¯æŒactionçš„é“¾å¼è§¦å‘
4. Commitï¼šçŠ¶æ€æ”¹å˜æäº¤æ“ä½œæ–¹æ³•ã€‚å¯¹mutationè¿›è¡Œæäº¤ï¼Œæ˜¯å”¯ä¸€èƒ½æ‰§è¡Œmutationçš„æ–¹æ³•
5. Mutationsï¼šçŠ¶æ€æ”¹å˜æ“ä½œæ–¹æ³•ã€‚æ˜¯Vuexä¿®æ”¹stateçš„å”¯ä¸€æ¨èæ–¹æ³•ï¼Œå…¶ä»–ä¿®æ”¹æ–¹å¼åœ¨ä¸¥æ ¼æ¨¡å¼ä¸‹å°†ä¼šæŠ¥é”™ã€‚è¯¥æ–¹æ³•åªèƒ½è¿›è¡ŒåŒæ­¥æ“ä½œï¼Œä¸”æ–¹æ³•ååªèƒ½å…¨å±€å”¯ä¸€ã€‚æ“ä½œä¹‹ä¸­ä¼šæœ‰ä¸€äº›hookæš´éœ²å‡ºæ¥ï¼Œä»¥è¿›è¡Œstateçš„ç›‘æ§ç­‰
6. Stateï¼šé¡µé¢çŠ¶æ€ç®¡ç†å®¹å™¨å¯¹è±¡ã€‚é›†ä¸­å­˜å‚¨Vue componentsä¸­dataå¯¹è±¡çš„é›¶æ•£æ•°æ®ï¼Œå…¨å±€å”¯ä¸€ï¼Œä»¥è¿›è¡Œç»Ÿä¸€çš„çŠ¶æ€ç®¡ç†ã€‚é¡µé¢æ˜¾ç¤ºæ‰€éœ€çš„æ•°æ®ä»è¯¥å¯¹è±¡ä¸­è¿›è¡Œè¯»å–ï¼Œåˆ©ç”¨Vueçš„ç»†ç²’åº¦æ•°æ®å“åº”æœºåˆ¶æ¥è¿›è¡Œé«˜æ•ˆçš„çŠ¶æ€æ›´æ–°
7. Gettersï¼šstateå¯¹è±¡è¯»å–æ–¹æ³•ã€‚å›¾ä¸­æ²¡æœ‰å•ç‹¬åˆ—å‡ºè¯¥æ¨¡å—ï¼Œåº”è¯¥è¢«åŒ…å«åœ¨äº†renderä¸­ï¼ŒVue Componentsé€šè¿‡è¯¥æ–¹æ³•è¯»å–å…¨å±€stateå¯¹è±¡

**æ€»ç»“è¯´æ˜ï¼š**
Vueç»„ä»¶æ¥æ”¶äº¤äº’è¡Œä¸ºï¼Œè°ƒç”¨dispatchæ–¹æ³•è§¦å‘actionç›¸å…³å¤„ç†ï¼Œè‹¥é¡µé¢çŠ¶æ€éœ€è¦æ”¹å˜ï¼Œåˆ™è°ƒç”¨commitæ–¹æ³•æäº¤mutationä¿®æ”¹stateï¼Œé€šè¿‡gettersè·å–åˆ°stateæ–°å€¼ï¼Œé‡æ–°æ¸²æŸ“Vue Componentsï¼Œç•Œé¢éšä¹‹æ›´æ–°

#### 7ã€å®‰è£…

```javascript
npm install vuex --save
```

#### 8ã€ç®€å•ç¤ºä¾‹

ï¼ˆ1ï¼‰src/vuex/store.jsä¸­å†™å…¥ä»¥ä¸‹ä»£ç ï¼š

```javascript
import { createStore } from 'vuex'

/* export default createStore({
  state: {},
  mutations: {},
  actions: {},
  modules: {}
}) */

// 1ã€stateï¼šåˆ›å»ºåˆå§‹åŒ–çŠ¶æ€
const state = {
  // æ”¾ç½®åˆå§‹çŠ¶æ€
  count: 1
}

// 2ã€mutationsï¼šåˆ›å»ºæ”¹å˜çŠ¶æ€çš„æ–¹æ³•
const mutations = {
  // çŠ¶æ€å˜æ›´å‡½æ•°-ä¸€èˆ¬å¤§å†™
  ADD (state, n) {
    state.count += n
  }
}

// 3ã€gettersï¼šæä¾›å¤–éƒ¨è·å–state
const getters = {
  count: function (state) {
    return state.count
  }
}

// 4ã€actionsï¼šåˆ›å»ºé©±åŠ¨æ–¹æ³•æ”¹å˜mutations
const actions = {
  // è§¦å‘mutationsä¸­ç›¸åº”çš„æ–¹æ³•-ä¸€èˆ¬å°å†™
  add ({ commit }, data) {
    commit('ADD', data)
  }
}
// 5ã€å…¨éƒ¨æ³¨å…¥Storeä¸­
const store = createStore({
  state,
  mutations,
  getters,
  actions
})

// 6ã€è¾“å‡ºstore
export default store
```

**ä»£ç è¯´æ˜ï¼š**

> - state - mutations - getters - actions - storeï¼Œä»¥ä¸Šå†™æ³•åŸºæœ¬å›ºå®šã€‚
> - å°å‹é¡¹ç›®ç”¨ä¸Šé¢çš„ç®€å•ç®¡ç†çŠ¶æ€å³å¯ã€‚

ï¼ˆ2ï¼‰src/main.jsä»£ç ä¸­

```javascript
/**
 * é¡¹ç›®çš„å¯åŠ¨å…¥å£
 */
import { createApp } from 'vue'
import App from './App.vue'
// æ³¨å†ŒçŠ¶æ€ç®¡ç†
import store from './store'

// åˆ›å»º Vue æ ¹å®ä¾‹
// æŠŠ vuex é…ç½®åˆ°æ ¹å®ä¾‹ä¸­
const app = createApp(App)
app.use(store) // å…¨å±€å¼•å…¥ vuex
app.mount('#app')
// createApp(App).use(store).use(router).mount('#app')

```

ï¼ˆ3ï¼‰src/compontent/Count.vueé¡µé¢ç»„ä»¶ä¸­ä»£ç å¦‚ä¸‹ï¼š

```javascript
<template>
    <div class="hello">
        <h1>{{ msg }}</h1>
        <h2>{{count}}</h2>
        <button @click="clickAdd">æ–°å¢</button>
    </div>
</template>
<script>
export default {
    data () {
        return {
            msg: 'Vuex test!'
        }
    },
    computed: {
        // è·å–stateå€¼
        count() {
            return this.$store.state.count;
        }
    },
    methods: {
        clickAdd() {
            //åˆ†å‘actionä¸­çš„addæ–¹æ³•
            this.$store.dispatch('add', 1);
        }
    }
}
</script>
<style scoped>
</style>
```

#### 9ã€state-çŠ¶æ€å¯¹è±¡çš„è·å–æ–¹æ³•

**ï¼ˆ1ï¼‰åœ¨ç»„ä»¶çš„templateä¸­ç›´æ¥ä½¿ç”¨**

```javascript
<h2>{{ $store.state.count }}</h2>
```

**ï¼ˆ2ï¼‰åœ¨è®¡ç®—å±æ€§computedä¸­ç›´æ¥èµ‹å€¼**

```javascript
// æ–¹å¼1ï¼šç›´æ¥è·å–
computed: {
    count() {
        // thisæŒ‡çš„æ˜¯main.jsä¸­çš„vueå®ä¾‹å¯¹è±¡
        return this.$store.state.count;
    }
}
```

**ï¼ˆ3ï¼‰é€šè¿‡mapStateçš„å¯¹è±¡æ¥èµ‹å€¼**

```javascript
// æ–¹å¼2ï¼šåˆ©ç”¨mapState
computed: mapState({
    // es5å†™æ³•
    count: function (state) {
         return state.count;
     },
    // es6å†™æ³•
    count: state => state.count
})
```

**ï¼ˆ4ï¼‰é€šè¿‡mapStateçš„æ•°ç»„æ¥èµ‹å€¼**

```javascript
// æ–¹å¼3ï¼šæ•°ç»„è·å–
computed: mapState(['count'])
```

**ï¼ˆ5ï¼‰é€šè¿‡mapStateçš„JSONæ¥èµ‹å€¼**

```javascript
// æ–¹å¼4ï¼šJSONè·å–
computed: mapState({
    count: 'count'
})
```

PSï¼šä¸€èˆ¬4å’Œ5ä¸¤ç§æ¯”è¾ƒå¸¸ç”¨
**å®Œæ•´ç¤ºä¾‹ä»£ç **

```javascript
<template>
    <div class="hello">
        <h1>{{ msg }}</h1>
        <h2>{{ $store.state.count }}</h2>
        <h2>{{count}}</h2>
        <button @click="clickAdd">æ–°å¢</button>
    </div>
</template>
<script>
import {mapState} from 'vuex'
export default {
    data () {
        return {
            msg: 'Vuex test!'
        }
    },
    // æ–¹å¼1ï¼šåœ¨è®¡ç®—å±æ€§computedä¸­ç›´æ¥èµ‹å€¼
    // computed: {
    //     count() {
    //         // thisæŒ‡çš„æ˜¯main.jsä¸­çš„vueå®ä¾‹å¯¹è±¡
    //         return this.$store.state.count;
    //     }
    // },
    // æ–¹å¼2ï¼šé€šè¿‡mapStateçš„å¯¹è±¡æ¥èµ‹å€¼
    // computed: mapState({
    //     // es5
    //     // count: function (state) {
    //     //     return state.count;
    //     // },
    //     // es6
    //     count: state => state.count
    // }),
    // æ–¹å¼3ï¼šé€šè¿‡mapStateçš„å¯¹è±¡æ¥èµ‹å€¼
    // computed: mapState(['count']),
    // æ–¹å¼4ï¼šé€šè¿‡mapStateçš„JSONæ¥èµ‹å€¼
    computed: mapState({
        count: 'count'
    }),
    methods: {
        clickAdd() {
            //åˆ†å‘actionä¸­çš„addæ–¹æ³•
            this.$store.dispatch('add', 1);
        }
    }
}
</script>
<style scoped>
</style>
```

#### 10ã€mutations-getters-actionså¼‚æ­¥

**ï¼ˆ1ï¼‰mutationsï¼ˆä¿®æ”¹çŠ¶æ€ï¼‰**

templateä¸­ç›´æ¥ä½¿ç”¨$store.commit( )è§¦å‘

```javascript
// template
<button @click="$store.commit('ADD')">+</button>

// src/vuex/store.js
const mutations = {
    // çŠ¶æ€å˜æ›´å‡½æ•°
    ADD (state) {
        state.count++;
    }
}
```

åˆ©ç”¨mapMutationså¼•å…¥è§¦å‘

```javascript
<template>
    <div class="hello">
        <h1>{{ msg }}</h1>
        <h2>{{count}}</h2>
        <!-- 3ã€ã€ç›´æ¥è°ƒç”¨ç›¸åº”çš„æ–¹æ³• -->
        <button @click="ADD">+</button>
    </div>
</template>
<script>
// 1ã€å¼•å…¥mapMutations
import {mapState, mapMutations} from 'vuex'
export default {
    data () {
        return {
            msg: 'Vuex test!'
        }
    },
    // é€šè¿‡mapStateçš„JSONæ¥èµ‹å€¼
    computed: mapState({
        count: 'count'
    }),
    // 2ã€methodsä¸­åŠ å…¥mapMutations
    methods: mapMutations([
        'ADD'
    ])
}
</script>
<style scoped>

</style>
```

**ï¼ˆ2ï¼‰gettersï¼ˆè·å–stateå’Œè¿‡æ»¤ï¼‰**

åŸºæœ¬ç”¨æ³•

```javascript
// src/vuex/store.js
const getters = {
    count: function(state){
        // è¿”å›åŠ ä¸Š100
        return state.count + 100;
    }
}
```

å¸¸è§„è·å–å€¼

```javascript
computed: {
    // è·å–getters
    count(){
        return this.$store.getters.count;
    }
}
```

mapGettersè·å–å€¼

```javascript
// 1ã€å¼•å…¥mapMutations
import {mapState, mapMutations, mapGetters} from 'vuex'

// 2ã€ä½¿ç”¨
computed: {
    // è·å–getters
    ...mapGetters(["count"])
}
```

**ï¼ˆ3ï¼‰actionsï¼ˆå¼‚æ­¥çŠ¶æ€ä¿®æ”¹ï¼‰**

actionså’ŒmutationsåŠŸèƒ½åŸºæœ¬ä¸€æ ·ï¼Œä¸åŒç‚¹æ˜¯ï¼Œactionsæ˜¯å¼‚æ­¥çš„æ”¹å˜stateçŠ¶æ€ï¼Œè€Œmutationsæ˜¯åŒæ­¥æ”¹å˜çŠ¶æ€ã€‚ä¸è¿‡å®é™…é¡¹ç›®ä¸­ä¸€èˆ¬éƒ½æ˜¯é€šè¿‡actionsæ”¹å˜mutationsä¸­çš„å€¼ã€‚
store.jsä¸­å¢åŠ å¼‚æ­¥ä»£ç 

```javascript
// src/vuex/store.js
const actions ={
    // è§¦å‘mutationsä¸­ç›¸åº”çš„æ–¹æ³•
    add ({commit}) {
        // å¢åŠ å¼‚æ­¥
        setTimeout(()=>{
            commit('ADD')
        },3000);
        console.log('æˆ‘æ¯”reduceæå‰æ‰§è¡Œ');
    }
}
```

å¸¸è§„ä½¿ç”¨

```javascript
// template
<button @click="add">+</button>

// script
methods: {
    add() {
        //åˆ†å‘action
        this.$store.dispatch('add');
    }
}
```

mapActionsçš„ä½¿ç”¨

```javascript
// template
<button @click="add">+</button>

// script
// å¼•å…¥mapActions
import {mapState, mapActions} from 'vuex'
// ä½¿ç”¨mapActions
methods: {
    ...mapActions(['add'])
}
```

#### 11ã€ä¼ é€’å‚æ•°

åœ¨vuexçš„æ–¹æ³•è°ƒç”¨ç”¨ä¼ é€’å‚æ•°ï¼Œåªéœ€è¦åœ¨mutationså’Œactionsç›¸åº”çš„åœ°æ–¹åŠ ä¸Šå‚æ•°ï¼Œç„¶åè°ƒç”¨çš„æ—¶å€™ä¼ å…¥å³å¯ã€‚
src/vuex/store.jsä¸­

```javascript
// actionsä¸­ä¼ é€’å‚æ•°
const mutations = {
    ADD (state, n) {
        state.count += n;
    }
}

// actionsä¸­ä¼ é€’å‚æ•°
const actions ={
    // è§¦å‘mutationsä¸­ç›¸åº”çš„æ–¹æ³•
    add ({commit}, n) {
        // å¢åŠ å¼‚æ­¥
        setTimeout(()=>{
            commit('ADD', n);
        },3000);
        console.log('æˆ‘æ¯”reduceæå‰æ‰§è¡Œ');
    }
}
```

é¡µé¢ç»„ä»¶å¸¸è§„è°ƒç”¨ä¼ é€’

```javascript
// template
<button @click="add">+</button>

// script
methods: {
    add() {
        // åˆ†å‘action
        this.$store.dispatch('add', 99);
     }
}
```

é¡µé¢ç»„ä»¶ä½¿ç”¨mapActionsè°ƒç”¨ä¼ é€’

```javascript
// template
<button @click="add(99)">+</button>

// script
methods: {
    ...mapActions(['add'])
}
```

#### 12ã€module-æ¨¡å—ç»„

å½“åº”ç”¨éå¸¸å¤æ‚ï¼ŒçŠ¶æ€éå¸¸å¤šçš„æ—¶å€™ï¼Œéœ€è¦å°†store åˆ†å‰²æˆæ¨¡å—ï¼ˆmoduleï¼‰ã€‚æ¯ä¸ªæ¨¡å—æ‹¥æœ‰è‡ªå·±çš„ stateã€mutationã€actionã€getterã€ç”šè‡³æ˜¯åµŒå¥—å­æ¨¡å—ï¼Œä»ä¸Šè‡³ä¸‹è¿›è¡ŒåŒæ ·æ–¹å¼çš„åˆ†å‰²ã€‚

**ï¼ˆ1ï¼‰å¤§è‡´çš„ç»“æ„**

```javascript
// æ¨¡å—A
const moduleA = {
  state: { ... },
  mutations: { ... },
  actions: { ... },
  getters: { ... }
}

// æ¨¡å—B
const moduleB = {
  state: { ... },
  mutations: { ... },
  actions: { ... }
}

// ç»„è£…
const store = new Vuex.Store({
  modules: {
    a: moduleA,
    b: moduleB
  }
})

// å–å€¼
store.state.a // -> moduleA çš„çŠ¶æ€
store.state.b // -> moduleB çš„çŠ¶æ€
```

**ï¼ˆ2ï¼‰è¯¦ç»†ç¤ºä¾‹**

å®é™…å¼€å‘ä¸­å»ºè®®æŠŠmoduleåˆ†å¼€ç¼–å†™ã€‚
src/vuex/module1.js

```javascript
// æ¨¡å—1
const module1 = {
    // åˆå§‹åŒ–çŠ¶æ€
    state: {
        module1: {
            name: 'æ¨¡å—1'
        }
    },
    // ç¼–å†™åŠ¨ä½œ
    mutations: {
        CHANGE1 (state, data) {
            state.module1 = data;
        }
    },
    // å–å€¼
    getters: {
        module1: function(state){
            return state.module1;
        }
    },
    // åˆ›å»ºé©±åŠ¨ï¼Œå¯å¼‚æ­¥
    actions: {
        change1 ({commit}, data) {
            commit('CHANGE1', data)
        }
    }
}

export default module1;
```

src/vuex/module2.js

```javascript
// æ¨¡å—1
const module2 = {
    // åˆå§‹åŒ–çŠ¶æ€
    state: {
        module2: {
            name: 'æ¨¡å—2'
        }
    },
    // ç¼–å†™åŠ¨ä½œ
    mutations: {
        CHANGE2 (state, data) {
            state.module2 = data;
        }
    },
    // å–å€¼
    getters: {
        module2: function(state){
            return state.module2;
        }
    },
    // åˆ›å»ºé©±åŠ¨ï¼Œå¯å¼‚æ­¥
    actions: {
        change2 ({commit}, data) {
            commit('CHANGE2', data)
        }
    }
}

export default module2;
```

src/vuex/store.js

```javascript
// å¼•å…¥vue
import Vue from 'vue'
// å¼•å…¥vuex
import Vuex from 'vuex'
// å¼•å…¥module1
import module1 from '@/vuex/module1'
// å¼•å…¥module2
import module2 from '@/vuex/module2'

// ä½¿ç”¨vuex
Vue.use(Vuex)

// æ¨¡å—æ³¨å…¥
const store = new Vuex.Store({
    modules: {
        a: module1,
        b: module2
    }
})

// è¾“å‡ºstore
export default store;
```

ç»„ä»¶ä¸­ä½¿ç”¨ï¼Œsrc/compontent/one.vue

```javascript
<template>
    <div id="app">
        <!-- module1 -->
        <h2>{{ module1.name }}</h2>
        <button @click="change1({'name': 'change1'})">module1æ”¹å˜</button>

        <!-- module2 -->
        <h2>{{ module2.name }}</h2>
        <button @click="change2({'name': 'change2'})">module2æ”¹å˜</button>
    </div>
</template>

<script>
// å¼•å…¥å¿«æ·æ–¹æ³•
import {mapState, mapGetters, mapActions} from 'vuex'

export default {
    name: 'app',
    data () {
        return {
        }
    },
    computed:{
        // mapStateå–å€¼
        // ...mapState({
        //     module1: state => state.a.module1.name,
        //     module2: state => state.b.module2.name
        // })

        // mapGetterå–å€¼
        ...mapGetters(['module1', 'module2'])
    },
    methods: {
        // mapActionå–æ–¹æ³•
        ...mapActions([
            'change1',
            'change2'
        ])
    }
}
</script>
<style>

</style>
```

PSï¼šmoduleä¸­å‘½åè¦å”¯ä¸€ï¼Œä¸ç„¶è·å–å€¼å’Œæ”¹å˜å€¼çš„æ—¶å€™ä¼šå†²çªï¼Œç›®å‰äº²æµ‹mapGettersåªèƒ½è·å–å¯¹è±¡ã€‚

# å¼‚å¸¸å¤„ç†

#### 1.vue3æŠ¥é”™Uncaught Error: Catch all routes ("*") must now be defined using a param with a custom regexp.

**vue3å¯¹404é…ç½®è¿›è¡Œäº†ä¿®æ”¹,å¿…é¡»è¦ä½¿ç”¨æ­£åˆ™åŒ¹é…**

```
{
    // åŒ¹é…æ‰€æœ‰è·¯å¾„  vue2ä½¿ç”¨*   vue3ä½¿ç”¨/:pathMatch(.*)*æˆ–/:pathMatch(.*)æˆ–/:catchAll(.*)
    path: "/:pathMatch(.*)*",
    name: "404",
    component: ()=> import("../components/NoFind.vue")
}
```

> åŸå› ï¼šVue Routerä¸å†ä½¿ç”¨path-to-regexpï¼Œè€Œæ˜¯å®ç°äº†è‡ªå·±çš„è§£æç³»ç»Ÿï¼Œè¯¥ç³»ç»Ÿå…è®¸è·¯ç”±æ’åå¹¶å¯ç”¨åŠ¨æ€è·¯ç”±ã€‚ç”±äºæˆ‘ä»¬é€šå¸¸ä¼šåœ¨æ¯ä¸ªé¡¹ç›®ä¸­æ·»åŠ ä¸€æ¡å•ç‹¬çš„åŒ…ç½—ä¸‡è±¡çš„è·¯çº¿ï¼Œå› æ­¤æ”¯æŒçš„ç‰¹æ®Šè¯­æ³•æ²¡æœ‰å¤ªå¤§çš„å¥½å¤„*ã€‚å‚æ•°çš„ç¼–ç æ˜¯è·¨è·¯çº¿ç¼–ç ï¼Œæ— ä¸€ä¾‹å¤–ä½¿äº‹æƒ…æ›´å®¹æ˜“é¢„æµ‹ã€‚